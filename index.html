<!DOCTYPE html>
<html>
<head>
  <title>Chromecast Receiver</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="main.css">
  
  <!--link href="https://fonts.googleapis.com/css?family=Over+the+Rainbow" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ballet" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Anton" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet"-->

  <style>
    /* CSS styles for the text message */
    .welcomme {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      #font-size: 36px;
      #font-weight: bold;
      color: #ffffff;
      background-color: rgba(0, 0, 0, 0);
      z-index: 999;
    }
	
  </style>
</head>
<body>
  <!-- The video player -->
  <!--video id="video" controls autoplay></video-->
  
  <div class="welcomme">
   	<div class="bg"></div>
	<div class="bg bg2"></div>
	<div class="bg bg3"></div>
	<div class="content">
		<div class="welcome">
			<h1 class="title">Vitajte</h1>
			<p class="message">Začíname už o chvíľu!</p>
		</div>
		<div class="verses" display="none">
			<div class="verse">VERSE</div>
			<div class="source">SRC</div>
		</div>
	</div>
  </div>
  
  <!-- The text message to display -->
  <!--div class="message">

	
	Hello, world!</div-->
  
  <!-- Include the Cast Receiver SDK -->
  <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>
  
  <!-- Initialize the CastReceiverContext -->
  <script type="text/javascript">
    // Create a CastReceiverContext
    const context = cast.framework.CastReceiverContext.getInstance();
	
	// https://marekhalmo.github.io/index.html
	// http://www.maniacs.sk/cast/index.html
	// Enable debug mode
    context.setLoggerLevel(cast.framework.LoggerLevel.DEBUG);

/*
	context.addCustomMessageListener('urn:x-cast:sk.maniacs.versecast', event => {
		//context.sendFeedbackMessage("Custom message received!");
		  // Get the message data from the event
		  const message = event.data;

		  // Update the text message with the received data
		  const messageElement = document.querySelector('.message');
		  messageElement.textContent = "BBBBB";//message;
	});
	*/

    // Add a message listener to handle incoming messages
    context.addCustomMessageListener('urn:x-cast:sk.maniacs.versecast.welcome', function(event) {
	  context.sendFeedbackMessage("Custom message received!");
      // Get the message data from the event
      const message = event.data;
	  
      // Update the text message with the received data
	  document.querySelector('.title').textContent = message.title;
	  document.querySelector('.message').textContent = message.message;
	  
	  // TODO: Animate (using classes)	  
	  document.querySelector(".welcome").style.display = 'block'
	  document.querySelector(".verses").style.display = 'none'
	  });
	  
	context.addCustomMessageListener('urn:x-cast:sk.maniacs.versecast.verses', function(event) {
	  context.sendFeedbackMessage("Custom message received!");
      // Get the message data from the event
      const message = event.data;

      // Update the text message with the received data
	  document.querySelector('.verse').textContent = message.verse;
	  document.querySelector('.source').textContent = message.source;
	  
	  // TODO: Animate (using classes)
	  document.querySelector(".welcome").style.display = 'none'
	  document.querySelector(".verses").style.display = 'block'
	  });
	  
	  
	/*
		DOBRE
	context.addCustomMessageListener('urn:x-cast:sk.maniacs.versecast', function(event) {
	  context.sendFeedbackMessage("Custom message received!");
      // Get the message data from the event
      const message = event.data;

      // Update the text message with the received data
      const messageElement = document.querySelector('.message');
	  messageElement.textContent = message.msg;
	  }
    });
	
	
	const messageEl = document.querySelector('.message');
    messageEl.textContent = "Welcome";
*/
    // Start the receiver
    context.start();
/*
    // Get the video element
    const video = document.getElementById('video');

    // Add a listener for the PLAYING event
    video.addEventListener('playing', function(event) {
      // Hide the text message when the video starts playing
      //const messageEl = document.querySelector('.welcomme');
	  //messageEl.style.display = 'none';
	  const message = event.type;
	  const messageEl = document.querySelector('.message');
      messageEl.textContent = message;
	  //console.log("Tam tam taaam");
	  
	  
    });

    // Add a listener for the PAUSED event
    video.addEventListener('pause', function() {
      // Show the text message when the video is paused
      const messageEl = document.querySelector('.welcomme');      
	  messageEl.style.display = 'flex';
    });
	*/
	/*
	// Add a message listener to handle incoming messages
    context.addCustomMessageListener('urn:x-cast:com.example.custom', function(event) {
      // Get the message data from the event
	  //const message = event.data;

      // Update the text message with the received data
      const messageEl = document.querySelector('.message');
      messageEl.textContent = "turums tu rum tututu";
	  console.log("Tam tam taaam");
    });
	
	
	const messageEl = document.querySelector('.message');
    messageEl.textContent = "Uitajte!";
	

    // Start the receiver
    context.start();
	*/
  </script>
</body>
</html>