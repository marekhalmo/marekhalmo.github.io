<!DOCTYPE html>
<html>
<head>
  <title>Chromecast Receiver</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="main.css">
  
  <!--link href="https://fonts.googleapis.com/css?family=Over+the+Rainbow" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ballet" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Anton" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet"-->
</head>
<body>
	<!-- The video player -->
	<!--video id="video">controls autoplay</video-->
	<!--cast-media-player style="display: none"></cast-media-player-->
	<cast-media-player></cast-media-player>
 
	<!-- Black screen to be displayed if nothing should be shown -->
	
	<div id="black" class="dimable enabled">
	</div>
	
	<div id="splash" class="dimable">
		<div class="bg"></div>
		<div class="bg bg2"></div>
		<div class="bg bg3"></div>
		<div id="welcome" class="centered">
			<h1 id="title">VerseCast</h1>
			<p id="message">Loading...</p>
		</div>
	</div>
		
	<div id="verses" class="dimable">
		<div id="verse" class="centered">Demo verse (ščťžýáíé´äô)</div>
		<div id="source">None 1:1‭-‬10 TSTB</div>		
	</div>
	
	<div id="debug" class="hidden">Debug</div>
  
  	<!-- Include the Cast Receiver SDK -->
  	<script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>

	<!-- UI functions -->
  	<script type="text/javascript" src="ui.js"></script>

	<!-- CAST Functions -->
	<script type="text/javascript" src="cast.js"></script>

	<!-- Initialize the CastReceiverContext -->
	<script type="text/javascript">
  
	showDebug();
	
    // Create a CastReceiverContext
	// https://marekhalmo.github.io/index.html
	// http://www.maniacs.sk/cast/index.html
	// Enable debug mode
    // context.setLoggerLevel(cast.framework.LoggerLevel.DEBUG);

/*
	context.addCustomMessageListener('urn:x-cast:sk.maniacs.versecast', event => {
		//context.sendFeedbackMessage("Custom message received!");
		  // Get the message data from the event
		  const message = event.data;

		  // Update the text message with the received data
		  const messageElement = document.querySelector('.message');
		  messageElement.textContent = "BBBBB";//message;
	});
*/
	/* send json like this to display message
	{
	   "media":{
		  "contentId":"bbb",
		  "contentUrl":"https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/mp4/BigBuckBunny.mp4",
		  "entity":"myapp://playlist/1",
		  "streamType":"BUFFERED",
		  "customData":{
			 "verse":"Potom vošiel do Jericha a prechádzal cezeň. A tu bol muž, menom Zachej, ktorý bol hlavným mýtnikom a bol bohatý. Chcel vidieť Ježiša, aby vedel, kto to je, no pre zástupy ho nemohol zazrieť, lebo bol malej postavy.",
			 "source":"Lukáš 19:1‭-‬3 SEBDT"
		  }
	   },
	   "credentials":"testCredentials"
	}
	*/
	const messageEl = document.getElementById('message');
    messageEl.textContent = "Bible verses on Chromecast!";
	fadeToVerse();

	
	/*
	const context = cast.framework.CastReceiverContext.getInstance();	
	const playerManager = context.getPlayerManager();	
	
    // Handle incoming messages
    playerManager.setMessageInterceptor(
      cast.framework.messages.MessageType.LOAD,
      request => {		
        if (request.media && request.media.customData) {			
			const customDataStr = JSON.stringify(request.media.customData);
			debug("CustomData: " + customDataStr);
			
			const customData = JSON.parse(customDataStr);
			debug("CustomData obj: " + JSON.stringify(customData));
			debug("...PARSED...");
			
			if(customData.debug) {
				showDebug();
			}
			
			if(customData.verse) {
				document.getElementById('verse').textContent = customData.verse;
			}
				
			if(customData.source) {
				document.getElementById('source').textContent = customData.source;
			}
			
			if(customData.size) {
				setSize(customData.size);
			}
			
			debug("...DONE");
			
			fadeToVerse();
			//displayVerseElement();
        }
      }
    );
	*/

	/*
	context.addCustomMessageListener('urn:x-cast:sk.maniacs.versecast', function(event) {
      // Get the message data from the event
      const message = event.data;

      // Update the text message with the received data
      const messageElement = document.querySelector('.message');
	  messageElement.textContent = message.msg;
    });
	*/
	

/*
    // Get the video element
    const video = document.getElementById('video');

    // Add a listener for the PLAYING event
    video.addEventListener('playing', function(event) {
      // Hide the text message when the video starts playing
      //const messageEl = document.querySelector('.welcomme');
	  //messageEl.style.display = 'none';
	  const message = event.type;
	  const messageEl = document.querySelector('.message');
      messageEl.textContent = message;
	  //console.log("Tam tam taaam");
	  
	  
    });

    // Add a listener for the PAUSED event
    video.addEventListener('pause', function() {
      // Show the text message when the video is paused
      const messageEl = document.querySelector('.welcomme');      
	  messageEl.style.display = 'flex';
    });
	*/
	/*
	// Add a message listener to handle incoming messages
    context.addCustomMessageListener('urn:x-cast:com.example.custom', function(event) {
      // Get the message data from the event
	  //const message = event.data;

      // Update the text message with the received data
      const messageEl = document.querySelector('.message');
      messageEl.textContent = "turums tu rum tututu";
	  console.log("Tam tam taaam");
    });
	
	
	const messageEl = document.querySelector('.message');
    messageEl.textContent = "Uitajte!";
	

    // Start the receiver
    context.start();
	*/
  </script>
</body>
</html>